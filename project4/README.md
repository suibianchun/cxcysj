**Project4: do your best to optimize SM3 implementation (software)**

**对于基础代码的部分：**

代码中定义了两个函数：sm3_iteration和sm3。sm3_iteration函数是SM3算法的核心迭代函数，根据输入数据和初始哈希值进行迭代计算。sm3函数是对输入数据进行填充、分块和迭代计算的封装函数。

在main函数中，首先定义了一个长度为32的数组hash，然后定义了一个字符串变量message赋值为"jzh"。接下来，通过调用sm3函数计算message的哈希值，并将结果存储在hash数组中。最后，将计算所用时间和哈希值打印出来。

整个代码的逻辑是将输入数据分块并进行迭代计算，最终得到哈希值。在循环中，使用了一些位运算和逻辑运算来对数据进行处理。其中，left_rotate函数用于实现循环左移操作，T数组用于存储常量，W和W1数组用于存储中间结果，hi数组用于存储初始哈希值和最终结果。

**对于优化代码的部分：**

采用OpenSSL可以明显看出速度的提升，具体可能原因分析如下：

OpenSSL 对 SM3 算法进行了优化的实现。通过精心设计和改进算法的数据结构、流程和操作，可以提高计算效率。这可能涉及到使用更高效的算法细节、减少不必要的计算步骤以及采用更快速的数据处理技术。

汇编代码优化：OpenSSL 在实现 SM3 算法时，可能会使用底层汇编代码来优化关键部分的计算过程。通过直接操作底层硬件指令，可以提高计算密集型操作的执行速度。

并行化处理：某些加密算法可以被有效地并行化，利用现代多核处理器的并行性能。OpenSSL 可能会在实现 SM3 算法时利用多线程或并行计算库来提高计算效率。

缓存管理优化：OpenSSL 在实现 SM3 算法时可能会进行缓存管理优化。通过合理地利用缓存来减少内存访问延迟，可以提高计算的效率。


**正确性验证：**

![image](https://github.com/suibianchun/cxcysj/assets/138552183/08070d8b-b897-47b6-a566-981285239574)

由下图可知，优化版本比基础版本加速了约9倍：

**基础版本：**

![image](https://github.com/suibianchun/cxcysj/assets/138552183/25d4b53f-9d31-433d-b9e6-d38f52660320)


**优化版本**

![image](https://github.com/suibianchun/cxcysj/assets/138552183/a41656ce-3714-48ef-b30e-8c684ae70c0b)


